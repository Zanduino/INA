<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>INA2xx: Arduino library to support the INAxxx family of current sensors</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">INA2xx
   &#160;<span id="projectnumber">v1.1.0</span>
   </div>
   <div id="projectbrief">Arduino Library to read current, voltage and power data from one or more INA2xx device(s)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Arduino library to support the INAxxx family of current sensors </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="Library_intro_section"></a>
Description</h1>
<p>Class definition header for the INA class. This library gives a common interface to various INA power monitor devices, see <a href="https://github.com/Zanduino/INA/wiki">https://github.com/Zanduino/INA/wiki</a> or the code below for a full list of currently supported devices. The INA devices have a 3-5V power supply and, depending upon the model, can measure voltages up to 26V or 36V. They are devices with High-Side / Low-Side Measurement, Bi-Directional Current and Power Monitor with I2C Compatible Interface. The device documentation can be found at the following location:<br />
 <a href="http://www.ti.com/amplifier-circuit/current-sense/power-current-monitors/products.html">http://www.ti.com/amplifier-circuit/current-sense/power-current-monitors/products.html</a><br />
<br />
 Detailed library descriptions are on the INA GitHub Wiki pages at <a href="https://github.com/Zanduino/INA/wiki">https://github.com/Zanduino/INA/wiki</a><br />
<br />
 The INA devices, apart from the INA250 and INA260, require an external shunt of known resistance to be placed across the high-side or low-side supply or ground line and they use the small current generated by the shunt to compute the amperage passing across the circuit. This value, coupled with the voltage measurement, allows the amperage and wattage to be computed by the INA device and these values can be read from the devices using the industry standard I2C protocol.</p>
<h1><a class="anchor" id="Style"></a>
Programming</h1>
<h2><a class="anchor" id="Coding"></a>
Coding and comments</h2>
<p>OK, I admit that I'm "old school" when it comes to programming style. I am used to using a full monitor and keyboard for development and testing, plus I like to heavily document code as it helps me remember what I did when I revisit code after several months (or years). I make use of the full width (which I've limited to 112 characters here) and put my comments at the end of lines. I prefer to use descriptive variable names, which means that they tend to be long.</p>
<h2><a class="anchor" id="StyleGuide"></a>
Style Guide</h2>
<p>Different languages have different coding styles. For the Arduino c++ language I've opted to go with one of the big players in the industry and have adopted the coding and style rules that Google recommends and which are documented at <a href="https://google.github.io/styleguide/cppguide.html">Google c++ Style Guide</a>. I have chosen to put braces on their own lines and include braces for even 1-liners. End braces are always commented so that convoluted code is more easily untangled.</p>
<h2><a class="anchor" id="Documentation"></a>
Documentation</h2>
<p>The comments have been formatted for use with <a href="doxygen.nl">Doxygen</a>, one of the leading documentation systems which is not only free but covers just about anything worth documenting. The Doxygen system parses the source files of a package and creates documentation. The default output is a set of HTML pages although it can produce single documents.</p>
<h2><a class="anchor" id="comments"></a>
Comment Format</h2>
<p>This package uses <a href="https://en.wikipedia.org/wiki/Markdown">Markdown</a> syntax for formatting comments, which makes for easy reading directly in the source code and well-formatted pretty-print in postprocessing.</p>
<h2><a class="anchor" id="ide"></a>
IDE</h2>
<p>I've opted for using Microsoft Visual Studio (version 16.2.5) for development, the community version can be downloaded for free at <a href="https://visualstudio.microsoft.com/downloads/">Microsoft Downloads</a> and I use the fantastic <a href="https://www.visualmicro.com/">Visual Micro</a> package which give the Arduino IDE inside Visual Studio. The base version is free or becomes only slightly annoying nagware after 90 days, but the software is inexpensive and the price is well worth it for supporting continued development.</p>
<h1><a class="anchor" id="doxygen"></a>
doxygen configuration</h1>
<p>This library is built with the standard "Doxyfile", which is located at <a href="https://github.com/Zanduino/Common/blob/main/Doxygen">https://github.com/Zanduino/Common/blob/main/Doxygen</a>. As described on that page, there are only 5 environment variables used, and these are set in the project's actions file, located at <a href="https://github.com/Zanduino/INA/blob/master/.github/workflows/ci-doxygen.yml">https://github.com/Zanduino/INA/blob/master/.github/workflows/ci-doxygen.yml</a> Edit this file and set the 5 variables - PRETTYNAME, PROJECT_NAME, PROJECT_NUMBER, PROJECT_BRIEF and PROJECT_LOGO so that these values are used in the doxygen documentation. The local copy of the doxyfile should be in the project's root directory in order to do local doxygen testing, but the file is ignored on upload to GitHub.</p>
<h1><a class="anchor" id="clang-format"></a>
clang-format</h1>
<p>Part of the GitHub actions for CI is running every source file through "clang-format" to ensure that coding formatting is done the same for all files. The configuration file ".clang-format" is located at <a href="https://github.com/Zanduino/Common/tree/main/clang-format">https://github.com/Zanduino/Common/tree/main/clang-format</a> and this is used for CI tests when pushing to GitHub. The local file, if present in the root directory, is ignored when committing and uploading.</p>
<h1><a class="anchor" id="license"></a>
GNU General Public License v3.0</h1>
<p>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version. This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details. You should have received a copy of the GNU General Public License along with this program. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.</p>
<h1><a class="anchor" id="author"></a>
Author</h1>
<p>Written by Arnd <a href="#" onclick="location.href='mai'+'lto:'+'Arn'+'d@'+'Zan'+'du'+'ino'+'.C'+'om'; return false;">Arnd@<span style="display: none;">.nosp@m.</span>Zand<span style="display: none;">.nosp@m.</span>uino.<span style="display: none;">.nosp@m.</span>Com</a> at <a href="https://www.github.com/SV-Zanshin">https://www.github.com/SV-Zanshin</a></p>
<h1><a class="anchor" id="versions"></a>
Changelog</h1>
<table class="doxtable">
<tr>
<th>Version </th><th>Date </th><th>Developer </th><th>Comments  </th></tr>
<tr>
<td>1.1.2 </td><td>2021-05-13 </td><td>SV-Zanshin </td><td>Issue #77. Add support for INA228 </td></tr>
<tr>
<td>1.1.1 </td><td>2021-03-12 </td><td>x3mEr </td><td>Issue #79. Documentation Update </td></tr>
<tr>
<td>1.0.14 </td><td>2020-12-01 </td><td>SV-Zanshin </td><td>Issue #72. Allow INA structures to be in memory rather than EEPROM </td></tr>
<tr>
<td>1.0.14 </td><td>2020-11-30 </td><td>johntaves </td><td>Issue #64. begin() does not set values on subsequent calls </td></tr>
<tr>
<td>1.0.14 </td><td>2020-11-29 </td><td>SV-Zanshin </td><td>Issue #71. Optimize library, cleanup source code </td></tr>
<tr>
<td>1.0.14 </td><td>2020-10-25 </td><td>gallium70 </td><td>Issue #66. Error in INA226/230/231 value for "power_LSB" </td></tr>
<tr>
<td>1.0.13 </td><td>2020-07-13 </td><td>fg89o </td><td>Issue #62. Added "_EEPROM_size" for ESP32 and ESP8266 </td></tr>
<tr>
<td>1.0.13 </td><td>2020-07-13 </td><td>fg89o </td><td>Issue #62. Incorrect "_EEPROM_offset" computation </td></tr>
<tr>
<td>1.0.12 </td><td>2020-07-13 </td><td>SV-Zanshin </td><td>Issue #41. Added "_EEPROM_offset" variable </td></tr>
<tr>
<td>1.0.12 </td><td>2020-07-03 </td><td>sages </td><td>Issue #60. Possible Overflow getBus(MicroAmps,MicroWatts) </td></tr>
<tr>
<td>1.0.11 </td><td>2020-06-30 </td><td>SV-Zanshin </td><td>Issue #58, changed formatting to use clang-format </td></tr>
<tr>
<td>1.0.11 </td><td>2020-06-29 </td><td>SV-Zanshin </td><td>Issue #57. "Alert..." functions should be "alert..." </td></tr>
<tr>
<td>1.0.11 </td><td>2020-05-05 </td><td>oliverb68 </td><td>Issue #56. Limit of +/- 2kW on getBusMicroWatts </td></tr>
<tr>
<td>1.0.10 </td><td>2020-05-03 </td><td>we9v </td><td>Issue #54. Limit of 127A maximum current changed to 1022A </td></tr>
<tr>
<td>1.0.10 </td><td>2020-05-01 </td><td>nathancheek </td><td>Issue #53. Extraneous conversion on getShuntMicrovolts </td></tr>
<tr>
<td>1.0.10 </td><td>2020-03-24 </td><td>nathancheek </td><td>Issue #52. Search for all 16 possible devices </td></tr>
<tr>
<td>1.0.10 </td><td>2020-03-22 </td><td>alphaarea </td><td>Issue #50. Wiki fix for "begin()" - MaxBusAmps overflow </td></tr>
<tr>
<td>1.0.9 </td><td>2019-12-15 </td><td>Steamerzone </td><td>Issue #49. Added ifdef for STM32F1 device support </td></tr>
<tr>
<td>1.0.9 </td><td>2019-10-27 </td><td>SV-Zanshin </td><td>Cleaned up Doxygen formatting </td></tr>
<tr>
<td>1.0.9 </td><td>2019-10-17 </td><td>nathancheek </td><td>Issue #47. Added EEPROM support for teensy </td></tr>
<tr>
<td>1.0.8 </td><td>2019-09-03 </td><td>miky2k </td><td>Issue #43. Added new method "conversionFinished()" </td></tr>
<tr>
<td>1.0.8 </td><td>2019-05-23 </td><td>avaldebe </td><td>Issue #42. Restrict I2C scan to possible devices </td></tr>
<tr>
<td>1.0.8 </td><td>2019-03-24 </td><td>mattlogic </td><td>Issue #40. Corrected INA226_CONFIG_SADC_MASK value </td></tr>
<tr>
<td>1.0.8 </td><td>2019-03-17 </td><td>SV-Zanshin </td><td>Issue #19. Corrected 4 value ranges in bus/shunt conversion </td></tr>
<tr>
<td>1.0.8 </td><td>2019-02-16 </td><td>SV-Zanshin </td><td>Corrected and tested ESP32 implementation </td></tr>
<tr>
<td>1.0.8 </td><td>2019-02-10 </td><td>SV-Zanshin </td><td>Issue #39. Allow non-AVR processors without EEPROM to run </td></tr>
<tr>
<td>1.0.8 </td><td>2019-02-09 </td><td>SV-Zanshin </td><td>Cleaned up doxygen comment formatting in .h and .cpp files </td></tr>
<tr>
<td>1.0.8 </td><td>2019-02-09 </td><td>SV-Zanshin </td><td>Issue #38. Add getDeviceAddress() function </td></tr>
<tr>
<td>1.0.7 </td><td>2019-01-20 </td><td>SV-Zanshin </td><td>Issue #36&amp;37. Changed for Travis-CI and automated doxygen </td></tr>
<tr>
<td>1.0.7 </td><td>2018-12-27 </td><td>SV-Zanshin </td><td>Issue #33. Change program documentation to doxygen format </td></tr>
<tr>
<td>1.0.6 </td><td>2018-12-13 </td><td>delboy711 </td><td>Issue #32. Incorrect ESP2866 rather than ESP8266 </td></tr>
<tr>
<td>1.0.6 </td><td>2018-10-19 </td><td>SV-Zanshin </td><td>Issue #31. Use full 0-32V Range on INA219 all the time </td></tr>
<tr>
<td>1.0.6 </td><td>2018-10-19 </td><td>SV-Zanshin </td><td>Issue #30. Added TEENSY support &amp; support large EEPROM </td></tr>
<tr>
<td>1.0.6 </td><td>2018-10-14 </td><td>SV-Zanshin </td><td>Added correct wire handling for ESP8266 and ESP32 </td></tr>
<tr>
<td>1.0.6 </td><td>2018-10-07 </td><td>SV-Zanshin </td><td>Optimized getBusRaw() and getShuntRaw() functions </td></tr>
<tr>
<td>1.0.5 </td><td>2018-10-04 </td><td>SV-Zanshin </td><td>Added getBusRaw() and getShuntRaw() functions </td></tr>
<tr>
<td>1.0.5 </td><td>2018-09-29 </td><td>SV-Zanshin </td><td>Reformatted comments to different c++ coding style </td></tr>
<tr>
<td>1.0.4 </td><td>2018-09-22 </td><td>SV-Zanshin </td><td>Issue #27. EEPROM Calls don't work with ESP32 </td></tr>
<tr>
<td>1.0.4 </td><td>2018-09-19 </td><td>SV-Zanshin </td><td>Issue #28. Ovef error when &gt;31Amps specified in begin() </td></tr>
<tr>
<td>1.0.3 </td><td>2018-09-04 </td><td>delboy711 </td><td>Issue #26. Incorrect INA3221 negative current readings </td></tr>
<tr>
<td>1.0.3 </td><td>2018-08-18 </td><td>SV-Zanshin </td><td>Issue #22. Reduce EEPROM Footprint </td></tr>
<tr>
<td>1.0.3 </td><td>2018-08-18 </td><td>SV-Zanshin </td><td>Issue #21. Rename I2C Constants to avoid redefine STM32F1 </td></tr>
<tr>
<td>1.0.2 </td><td>2018-07-22 </td><td>SV-Zanshin </td><td>Issue #11. Reduce EEPROM footprint. Removed "deviceName", 8B. Changed datatype in structure to bit-level length defs, saving additional 3 bytes </td></tr>
<tr>
<td>1.0.2 </td><td>2018-07-21 </td><td>avaldeve </td><td>Issue #12. Incorrect const datatype for I2C Speeds </td></tr>
<tr>
<td>1.0.2 </td><td>2018-07-12 </td><td>coelner </td><td>Issue #9. Esplora doesn't accept "Wire.begin()" </td></tr>
<tr>
<td>1.0.2 </td><td>2018-07-08 </td><td>SV-Zanshin </td><td>Issue #2. Finished testing INA3221 across all functions </td></tr>
<tr>
<td>1.0.2 </td><td>2018-07-07 </td><td>dnlwgnd </td><td>Issue #4. Guard code used incorrect label </td></tr>
<tr>
<td>1.0.2 </td><td>2018-06-30 </td><td>SV-Zanshin </td><td>Issue #3. Adding faster I2C bus support </td></tr>
<tr>
<td>1.0.2 </td><td>2018-06-29 </td><td>SV-Zanshin </td><td>Issue #2. Adding INA3221 support to library </td></tr>
<tr>
<td>1.0.2 </td><td>2018-06-29 </td><td>SV-Zanshin </td><td>Issue #2. Adding INA3221 support to library </td></tr>
<tr>
<td>1.0.1 </td><td>2018-06-24 </td><td>SV-Zanshin </td><td>Removed extraneous elements from ina struct, optimized code </td></tr>
<tr>
<td>1.0.1b </td><td>2018-06-23 </td><td>SV-Zanshin </td><td>Fixed error on multiple devices with ina structure contents </td></tr>
<tr>
<td>1.0.1a </td><td>2018-06-23 </td><td>SV-Zanshin </td><td>Removed debug mode and code </td></tr>
<tr>
<td>1.0.0 </td><td>2018-06-22 </td><td>SV-Zanshin </td><td>Initial release </td></tr>
<tr>
<td>1.0.0b </td><td>2018-06-17 </td><td>SV-Zanshin </td><td>Continued coding, tested on INA219 and INA226 </td></tr>
<tr>
<td>1.0.0a </td><td>2018-06-10 </td><td>SV-Zanshin </td><td>Initial coding began </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
